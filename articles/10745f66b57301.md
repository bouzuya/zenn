---
emoji: "💬"
publication_name: "doctormate"
published: true
published_at: 2026-01-12 12:00
title: "axum crate の Extractor"
topics: ["rust"]
type: "tech"
---

# axum crate の Extractor

[前回は axum crate の Handler の実装を追いかけてみました](https://zenn.dev/doctormate/articles/7f7114a3b12e87)。

今回は axum crate の Extractor を見ていきます。

今回も axum crate のバージョンは 0.8.4 です。

## axum crate の Extractor とは

axum crate の Extractor は `FromRequest` または `FromRequestParts` を実装した型です。 Handler の引数として 0 個以上の Extractor を指定できます。

リクエストから値を抽出 (extract) するから Extractor ということでしょう。

<https://docs.rs/axum/0.8.4/axum/index.html#extractors>
<https://docs.rs/axum/0.8.4/axum/extract/index.html>

## ビルトインの Extractor

ビルトインの Extractor を調べるには `FromRequestParts` trait と `FromRequest` trait のドキュメントからたどると良さそうです。

<https://docs.rs/axum/0.8.4/axum/extract/trait.FromRequestParts.html>
<https://docs.rs/axum/0.8.4/axum/extract/trait.FromRequest.html>

- `FromRequestParts`
    - `()`
    - `Extensions`
    - `HeaderMap`
    - `Method`
    - `Parts`
    - `Uri`
    - `Version`
    - `(T1,)`
    - `(T1, T2)`
    - `(T1, ..., T16)`
    - `Option<T>` `T: OptionalFromRequestParts<S>`
    - `Result<T, T::Rejection>` `T: OptionalFromRequestParts<S>`
    - `State<InnerState>`
    - `MatchedPath`
    - `NestedPath`
    - `OriginalUri`
    - `RawPathParams`
    - `RawQuery`
    - `WebSocketUpgrade<DefaultOnFailedUpgrade>`
    - `ConnectInfo<T>`
    - `Extension<T>`
    - `Path<T>`
    - `Query<T>`
- `FromRequest`
    - `String`
    - `Bytes`
    - `BytesMut`
    - `Request<Body>`
    - `(T1,)`
    - `(T1, T2)`
    - `(T1, ..., T16)`
    - `Option<T>` `T: OptionalFromRequest<S>`
    - `Result<T, T::Rejection>` `T: OptionalFromRequest<S>`
    - `Body`
    - `Multipart`
    - `RawForm`
    - `T` `T: FromRequestParts<S>`
    - `Form<T>`
    - `Json<T>`

`HeaderMap`, `Path`, `Query`, `State`, `Json` などよく見るものから、 `Option` や `Result` などちょっとクセのありそうなものまでありますね。 `Request` という直接的に受け取るものもあります。

ほかには `FromRequestParts` は `FromRequest` でもあることも分かります。

`Option` の `OptionalFromRequest` と `OptionalFromRequestParts` については別途触れたほうが良さそうです。

**WIP**

- Applying multiple extractors
- The order of extractors
- Handling extractor rejections
- Optional extractors
- Customizing extractor responses
- Accessing inner errors
- Defining custom extractors
- Implementing FromRequestParts
- Implementing FromRequest
- Cannot implment both FromRequest and FromRequestParts
- Accessing other extractors in FromRequest or FromRequestParts implementations
- Request body limits
- Wrapping extractors
- Logging rejections

## おわりに
